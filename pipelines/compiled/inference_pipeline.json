{
  "components": {
    "comp-prediction-task": {
      "executorLabel": "exec-prediction-task",
      "inputDefinitions": {
        "parameters": {
          "base_output_directory": {
            "defaultValue": "gs://profitscout-lx6bb-pipeline-artifacts/inference/job-output",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "destination_table": {
            "parameterType": "STRING"
          },
          "display_name": {
            "defaultValue": "profitscout-batch-prediction",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "enable_web_access": {
            "defaultValue": false,
            "isOptional": true,
            "parameterType": "BOOLEAN"
          },
          "encryption_spec_key_name": {
            "defaultValue": "",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "labels": {
            "defaultValue": {},
            "isOptional": true,
            "parameterType": "STRUCT"
          },
          "location": {
            "defaultValue": "{{$.pipeline_google_cloud_location}}",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "max_wait_duration": {
            "defaultValue": "86400s",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "model_dir": {
            "parameterType": "STRING"
          },
          "network": {
            "defaultValue": "",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "persistent_resource_id": {
            "defaultValue": "{{$.pipeline_persistent_resource_id}}",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "project": {
            "parameterType": "STRING"
          },
          "reserved_ip_ranges": {
            "defaultValue": [],
            "isOptional": true,
            "parameterType": "LIST"
          },
          "restart_job_on_worker_restart": {
            "defaultValue": false,
            "isOptional": true,
            "parameterType": "BOOLEAN"
          },
          "service_account": {
            "defaultValue": "",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "source_table": {
            "parameterType": "STRING"
          },
          "strategy": {
            "defaultValue": "STANDARD",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "tensorboard": {
            "defaultValue": "",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "timeout": {
            "defaultValue": "604800s",
            "isOptional": true,
            "parameterType": "STRING"
          },
          "worker_pool_specs": {
            "defaultValue": [
              {
                "container_spec": {
                  "args": [
                    "--project-id",
                    "{{$.inputs.parameters['project']}}",
                    "--source-table",
                    "{{$.inputs.parameters['source_table']}}",
                    "--destination-table",
                    "{{$.inputs.parameters['destination_table']}}",
                    "--model-dir",
                    "{{$.inputs.parameters['model_dir']}}"
                  ],
                  "command": [
                    "python3",
                    "main.py"
                  ],
                  "env": [],
                  "image_uri": "us-central1-docker.pkg.dev/profitscout-lx6bb/profit-scout-repo/predictor:latest"
                },
                "disk_spec": {
                  "boot_disk_size_gb": 100.0,
                  "boot_disk_type": "pd-ssd"
                },
                "machine_spec": {
                  "machine_type": "n1-standard-8"
                },
                "replica_count": 1.0
              }
            ],
            "isOptional": true,
            "parameterType": "LIST"
          }
        }
      },
      "outputDefinitions": {
        "parameters": {
          "gcp_resources": {
            "parameterType": "STRING"
          }
        }
      }
    }
  },
  "defaultPipelineRoot": "gs://profitscout-lx6bb-pipeline-artifacts/inference",
  "deploymentSpec": {
    "executors": {
      "exec-prediction-task": {
        "container": {
          "args": [
            "--type",
            "CustomJob",
            "--payload",
            "{\"display_name\": \"{{$.inputs.parameters['display_name']}}\", \"job_spec\": {\"worker_pool_specs\": {{$.inputs.parameters['worker_pool_specs']}}, \"scheduling\": {\"timeout\": \"{{$.inputs.parameters['timeout']}}\", \"restart_job_on_worker_restart\": {{$.inputs.parameters['restart_job_on_worker_restart']}}, \"strategy\": \"{{$.inputs.parameters['strategy']}}\", \"max_wait_duration\": \"{{$.inputs.parameters['max_wait_duration']}}\"}, \"service_account\": \"{{$.inputs.parameters['service_account']}}\", \"tensorboard\": \"{{$.inputs.parameters['tensorboard']}}\", \"enable_web_access\": {{$.inputs.parameters['enable_web_access']}}, \"network\": \"{{$.inputs.parameters['network']}}\", \"reserved_ip_ranges\": {{$.inputs.parameters['reserved_ip_ranges']}}, \"base_output_directory\": {\"output_uri_prefix\": \"{{$.inputs.parameters['base_output_directory']}}\"}, \"persistent_resource_id\": \"{{$.inputs.parameters['persistent_resource_id']}}\"}, \"labels\": {{$.inputs.parameters['labels']}}, \"encryption_spec\": {\"kms_key_name\": \"{{$.inputs.parameters['encryption_spec_key_name']}}\"}}",
            "--project",
            "{{$.inputs.parameters['project']}}",
            "--location",
            "{{$.inputs.parameters['location']}}",
            "--gcp_resources",
            "{{$.outputs.parameters['gcp_resources'].output_file}}"
          ],
          "command": [
            "python3",
            "-u",
            "-m",
            "google_cloud_pipeline_components.container.v1.custom_job.launcher"
          ],
          "image": "gcr.io/ml-pipeline/google-cloud-pipeline-components:2.20.1"
        }
      }
    }
  },
  "pipelineInfo": {
    "description": "Generate High Gamma predictions for all tickers.",
    "name": "profitscout-daily-prediction-pipeline"
  },
  "root": {
    "dag": {
      "tasks": {
        "prediction-task": {
          "cachingOptions": {
            "enableCache": true
          },
          "componentRef": {
            "name": "comp-prediction-task"
          },
          "inputs": {
            "parameters": {
              "destination_table": {
                "componentInputParameter": "destination_table"
              },
              "model_dir": {
                "componentInputParameter": "model_dir"
              },
              "project": {
                "componentInputParameter": "project"
              },
              "source_table": {
                "componentInputParameter": "source_table"
              }
            }
          },
          "taskInfo": {
            "name": "prediction-task"
          }
        }
      }
    },
    "inputDefinitions": {
      "parameters": {
        "destination_table": {
          "defaultValue": "profit_scout.daily_predictions",
          "isOptional": true,
          "parameterType": "STRING"
        },
        "model_dir": {
          "defaultValue": "gs://profitscout-lx6bb-pipeline-artifacts/training/model-artifacts/latest",
          "isOptional": true,
          "parameterType": "STRING"
        },
        "project": {
          "defaultValue": "profitscout-lx6bb",
          "isOptional": true,
          "parameterType": "STRING"
        },
        "source_table": {
          "defaultValue": "profit_scout.price_data",
          "isOptional": true,
          "parameterType": "STRING"
        }
      }
    }
  },
  "schemaVersion": "2.1.0",
  "sdkVersion": "kfp-2.14.2"
}